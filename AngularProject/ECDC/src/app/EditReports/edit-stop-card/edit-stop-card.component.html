<div class="container mb-5" style="margin-top: 8%;">
  <div class="heading_container heading_center d-flex">
    <h2 class="mx-auto my-4">
      Edit Stop Card
    </h2>

  </div>

  <div class="row">
    <form [formGroup]="StopCardForm" id="print-section" (ngSubmit)="submitData()"
      class="col-md-10 mx-auto d-flex flex-wrap">

      <table class="table">
        <tr>
          <td>
            <div class="form-group">
              <label class="form-label">Date: </label>
              <input type="date" formControlName="date" [(ngModel)]="stopCard.date" [ngModel]="stopCard.date | date: 'yyyy-MM-dd'" class="form-control" />
              <div *ngIf="date?.invalid && (date?.dirty || date?.touched)">
                <small class="text-danger" *ngIf="date?.errors?.['required']">
                  Date is required
                </small>
              </div>
            </div>
          </td>
          <td>
            <label class="form-label m-0 pb-0">Employee Code: </label>
            <input list="ReportedBymenace" autocomplete="off" name="menace" formControlName="empCode" [(ngModel)]="stopCard.empCode" class="form-control"
              (input)="selectedMenace($event)">
            <datalist id="ReportedBymenace">
              <option *ngFor="let menace of ReportedByCodeList">{{menace.empCode}} </option>
            </datalist>
          </td>
        </tr>
        <tr>
          <td>
            <div class="from-group">
              <label for="reportedByPositionID" class="form-label">Reported By_Position</label>
              <input class="form-control" [value]="ReportedBy_Position" disabled />
              <input name="reportedByPositionID" formControlName="reportedByPositionID" id="reportedByPositionID"
                class="form-control" [(ngModel)]="ReportedByPositionID" hidden />
            </div>
          </td>
          <td>
            <div class="form-group">
              <label class="form-label" for="reportedByNameID">Reported By_Name</label>
              <input class="form-control" [value]="ReportedBy_Name" disabled />
              <input name="reportedByNameID" formControlName="reportedByNameID" id="reportedByNameID"
                class="form-control" [(ngModel)]="ReportedBy_NameID" hidden />
            </div>
          </td>
        </tr>


        <tr>
          <td>
            <div class="from-group">
              <label for="classificationID" class="form-label">Classification</label>
              <select name="classificationID" formControlName="classificationID" [(ngModel)]="stopCard.classificationID"
                id="classificationID" class="form-select">
                <option value="" disabled selected>Choose Classification Of Stop Card</option>
                <option *ngFor="let item of classificationList" value="{{item.id}}">{{item.name}}</option>
              </select>
            </div>
          </td>
          <td colspan="3">
            <div class="from-group">
              <label for="stopWorkAuthorityApplied" class="form-label">Stop Work Authority Applied :</label>
              <select name="stopWorkAuthorityApplied" formControlName="stopWorkAuthorityApplied"
                [(ngModel)]="stopCard.stopWorkAuthorityApplied" id="stopWorkAuthorityApplied" class="form-select"
                (change)="verifecationStateSelected($event)">
                <option value="" disabled selected>Choose Stop Work Authority Applied</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>
          </td>
        </tr>

        <tr>
          <td>
            <div class="from-group">
              <label for="typeOfObservationCategoryID" class="form-label">Type Of Observation Category:</label>
              <select name="typeOfObservationCategoryID" formControlName="typeOfObservationCategoryID"
                [(ngModel)]="stopCard.typeOfObservationCategoryID" id="typeOfObservationCategoryID" class="form-select">
                <option value="" disabled selected>Choose Observation Category</option>
                <option *ngFor="let item of typeOfObservationCategoryList" value="{{item.id}}">{{item.name}}</option>
              </select>
            </div>
          </td>
          <td colspan="3">
            <div class="form-group ">
              <label class="form-label">Status: </label>
              <select name="status" formControlName="status" [(ngModel)]="stopCard.status" id="status"
                class="form-select">
                <option value="" disabled selected>Choose Status</option>
                <option value="Open">Open</option>
                <option value="Closed">Closed</option>
              </select>
            </div>
          </td>
        </tr>

        <tr>
          <td colspan="3">
            <div class="form-group">
              <label>Description :</label>
              <textarea style="resize: none;" rows="3" type="text" formControlName="description"
                [(ngModel)]="stopCard.description" class="form-control"></textarea>
              <div *ngIf="description?.invalid && (description?.dirty || description?.touched)">
                <small class="text-danger" *ngIf="description?.errors?.['required']">
                  Description is required
                </small>
              </div>
            </div>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <div class="form-group">
              <label>Action Required</label>
              <input type="text" formControlName="actionRequired" [(ngModel)]="stopCard.actionRequired"
                class="form-control" />
              <div *ngIf="actionRequired?.invalid && (actionRequired?.dirty || actionRequired?.touched)">
                <small class="text-danger" *ngIf="actionRequired?.errors?.['required']">
                  Action Required is required
                </small>
              </div>
            </div>
          </td>
        </tr>
      </table>

      <input type="submit" class="btn btn-success me-3" value="Update" />
      <!-- <input type="submit" class="btn btn-primary me-3" value="Export Data" (click)="Download()" /> -->
      <input routerLink="/PrintStopCard" type="submit" class="btn btn-primary" value="Show Data">
    </form>
    <!-- <label class="form-label mt-5 ms-5">Reoprt No.ECDC-QHSE-FM-12</label> -->
  </div>
</div>
